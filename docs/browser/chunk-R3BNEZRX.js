import{a as R}from"./chunk-VWDEYKCE.js";import{a as v,b as l,c as C,d as _,h as g,i as y,j as O,k as x,m as N}from"./chunk-XHZB7IPA.js";import{l as F,m as k}from"./chunk-6XQ4R34H.js";import{a as b,c as S}from"./chunk-OPIBKOQE.js";import"./chunk-JICLCJKO.js";import"./chunk-ORPLGSWX.js";import{Cb as d,Lb as a,Sb as f,Ta as p,ca as r,fa as c,lb as h,tb as t,ub as i,vb as s}from"./chunk-7LPCS22P.js";var j=(()=>{let o=class o{constructor(){this._ActivatedRoute=r(b),this._Router=r(S),this._FormBuilder=r(x),this._OrderService=r(R),this._ToastrService=r(k),this._CartService=r(F),this.idCart="",this.order=this._FormBuilder.group({details:[null,[l.required]],phone:[null,[l.required]],city:[null,[l.required]]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.idCart=e.get("id")}})}orderSubmit(){this.CheckoutSub=this._OrderService.Checkout(this.idCart,this.order.value).subscribe({next:e=>{console.log(e),window.open(e.session.url,"_self"),this._ToastrService.success("success")}})}cashOrderUser(){this.CashOrderSub=this._OrderService.CashOrder(this.idCart,this.order.value).subscribe({next:e=>{console.log("cach",e),this._Router.navigate(["/allorders"]),this._CartService.cartNumber.set(0)}})}ngOnDestroy(){this.CashOrderSub?.unsubscribe(),this.CheckoutSub?.unsubscribe()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=c({type:o,selectors:[["app-order"]],standalone:!0,features:[f],decls:18,vars:1,consts:[[1,"bg-main-light","my-5","rounded-4","w-50","mx-auto","p-3"],[1,"h3","text-main"],[3,"ngSubmit","formGroup"],["for","details"],["formControlName","details","id","details",1,"form-control"],["for","city"],["formControlName","phone","id","city","type","text",1,"form-control"],["for","phone"],["formControlName","city","id","phone","type","tel",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center"],["type","submit",1,"btn-main","p-1","mt-2"],["type","button",1,"btn-main","p-1","mt-2",3,"click"]],template:function(n,u){n&1&&(t(0,"section",0)(1,"h1",1),a(2,"shipping"),i(),t(3,"form",2),d("ngSubmit",function(){return u.orderSubmit()}),t(4,"div"),s(5,"label",3)(6,"textarea",4),i(),t(7,"div"),s(8,"label",5)(9,"input",6),i(),t(10,"div"),s(11,"label",7)(12,"input",8),i(),t(13,"div",9)(14,"button",10),a(15,"Check Out"),i(),t(16,"button",11),d("click",function(){return u.cashOrderUser()}),a(17,"Cash Order"),i()()()()),n&2&&(p(3),h("formGroup",u.order))},dependencies:[N,g,v,C,_,y,O]});let m=o;return m})();export{j as OrderComponent};
