import{a as O}from"./chunk-QAR4RVT7.js";import{a as k,b as F,c as q,d as D,h as A,i as R,j as G,k as M,m as j}from"./chunk-XHZB7IPA.js";import{c as I,d as N}from"./chunk-OPIBKOQE.js";import"./chunk-JICLCJKO.js";import{c as V,d as z}from"./chunk-FPOCNBP4.js";import{h as B}from"./chunk-ORPLGSWX.js";import{Cb as L,Db as C,Lb as m,Mb as s,Sb as T,Ta as i,Vb as b,Yb as d,Zb as u,ca as S,db as x,fa as y,jb as f,lb as w,pb as c,tb as n,ub as o,vb as E}from"./chunk-7LPCS22P.js";var P=(e,l)=>({"is-valid":e,"is-invalid":l});function U(e,l){e&1&&(n(0,"p",18),m(1),d(2,"translate"),o()),e&2&&(i(),s(" ",u(2,1,"login.email is_required")," "))}function $(e,l){e&1&&(n(0,"p",18),m(1),d(2,"translate"),o()),e&2&&(i(),s(" ",u(2,1,"login.enter valid email")," "))}function H(e,l){if(e&1&&(n(0,"div",6),f(1,U,3,3,"p",18)(2,$,3,3,"p",18),o()),e&2){let _,a,g=C();i(),c(1,(_=g.loginForm.get("email"))!=null&&_.getError("required")?1:-1),i(),c(2,(a=g.loginForm.get("email"))!=null&&a.getError("email")?2:-1)}}function J(e,l){e&1&&(n(0,"p",18),m(1),d(2,"translate"),o()),e&2&&(i(),s(" ",u(2,1,"login.password is required")," "))}function K(e,l){e&1&&(n(0,"p",18),m(1),d(2,"translate"),o()),e&2&&(i(),s(" ",u(2,1,"login.enter valid password")," "))}function Q(e,l){if(e&1&&(n(0,"div",6),f(1,J,3,3,"p",18)(2,K,3,3,"p",18),o()),e&2){let _,a,g=C();i(),c(1,(_=g.loginForm.get("password"))!=null&&_.getError("required")?1:-1),i(),c(2,(a=g.loginForm.get("password"))!=null&&a.getError("pattern")?2:-1)}}function W(e,l){e&1&&E(0,"span",15)}function X(e,l){if(e&1&&(n(0,"p",16),m(1),o()),e&2){let _=C();i(),s(" ",_.msgError()," ")}}function Y(e,l){if(e&1&&(n(0,"p",17),m(1),o()),e&2){let _=C();i(),s(" ",_.msgSuccess()," ")}}var se=(()=>{let l=class l{constructor(){this._FormBuilder=S(M),this.loginForm=this._FormBuilder.group({email:[null,[F.required,F.email]],password:[null,[F.required,F.pattern(/^\w{6,150}$/)]]}),this._AuthService=S(O),this._Router=S(I),this.msgError=x(""),this.msgSuccess=x(""),this.isLoding=x(!1)}loginSubmit(){this.loginForm.valid&&(this.isLoding.set(!0),this.loginSubscrip=this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:a=>{a.message=="success"&&(console.log(a),this.msgSuccess=a.message,this.isLoding.set(!1),localStorage.setItem("userToken",a.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"]))},error:a=>{this.isLoding.set(!1)}}))}ngOnDestroy(){this.loginSubscrip?.unsubscribe()}};l.\u0275fac=function(g){return new(g||l)},l.\u0275cmp=y({type:l,selectors:[["app-login"]],standalone:!0,features:[T],decls:32,vars:32,consts:[[1,"bg-main-light","shadow","p-2","my-5","rounded-4","text-capitalize"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["formControlName","email","type","email","id","email","placeholder","name@example.com",1,"form-control","shadow-none","border-0",3,"ngClass"],["for","email"],[1,"text-danger","mt-1","w-50","p-0"],["formControlName","password","type","password","id","password","placeholder","name@example.com",1,"form-control","shadow-none","border-0",3,"ngClass"],["for","password"],[1,"d-flex","align-items-center","justify-content-between","container"],[1,""],["routerLink","/register",1,"link-info"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],[1,"btn-main"],[1,"fas","fa-spin","fa-spinner"],[1,"text-danger","p-1","m-0"],[1,"text-success","p-1","m-0"],[1,"m-0"]],template:function(g,t){if(g&1&&(n(0,"section",0)(1,"h1",1),m(2),d(3,"translate"),o(),n(4,"form",2),L("ngSubmit",function(){return t.loginSubmit()}),n(5,"div",3),E(6,"input",4),n(7,"label",5),m(8),d(9,"translate"),o(),f(10,H,3,2,"div",6),o(),n(11,"div",3),E(12,"input",7),n(13,"label",8),m(14),d(15,"translate"),o(),f(16,Q,3,2,"div",6),o(),n(17,"div",9)(18,"div",10)(19,"a",11),m(20),d(21,"translate"),o()(),n(22,"div",12)(23,"a",13),m(24),d(25,"translate"),o(),n(26,"button",14),m(27),d(28,"translate"),f(29,W,1,0,"span",15),o()()(),f(30,X,2,1,"p",16)(31,Y,2,1,"p",17),o()()),g&2){let r,v,p,h;i(2),s(" ",u(3,14,"login.login now")," :"),i(2),w("formGroup",t.loginForm),i(2),w("ngClass",b(26,P,!((r=t.loginForm.get("email"))!=null&&r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)),((r=t.loginForm.get("email"))==null?null:r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)))),i(2),s(" ",u(9,16,"login.email")," "),i(2),c(10,(v=t.loginForm.get("email"))!=null&&v.errors&&((v=t.loginForm.get("email"))!=null&&v.touched||(v=t.loginForm.get("email"))!=null&&v.dirty)?10:-1),i(2),w("ngClass",b(29,P,!((p=t.loginForm.get("password"))!=null&&p.errors)&&(((p=t.loginForm.get("password"))==null?null:p.touched)||((p=t.loginForm.get("password"))==null?null:p.dirty)),((p=t.loginForm.get("password"))==null?null:p.errors)&&(((p=t.loginForm.get("password"))==null?null:p.touched)||((p=t.loginForm.get("password"))==null?null:p.dirty)))),i(2),s(" ",u(15,18,"login.password")," "),i(2),c(16,(h=t.loginForm.get("password"))!=null&&h.errors&&((h=t.loginForm.get("password"))!=null&&h.touched||(h=t.loginForm.get("password"))!=null&&h.dirty)?16:-1),i(4),s(" ",u(21,20,"login.signup")," "),i(4),s(" ",u(25,22,"login.forget password")," ?"),i(3),s(" ",u(28,24,"login.login")," "),i(2),c(29,t.isLoding()?29:-1),i(),c(30,t.msgError()?30:-1),i(),c(31,t.msgSuccess()?31:-1)}},dependencies:[j,A,k,q,D,R,G,B,N,z,V]});let e=l;return e})();export{se as LoginComponent};
