import './polyfills.server.mjs';
import{a as R}from"./chunk-HPASDKXM.mjs";import{a as H}from"./chunk-544AYCTB.mjs";import{a as Z}from"./chunk-EZSB3WC6.mjs";import{a as X,b as Y}from"./chunk-RCITOMF2.mjs";import"./chunk-GTSSCL6B.mjs";import{c as z,d as G}from"./chunk-LOXGQ4IT.mjs";import{a as q,c as J,g as K,l as Q}from"./chunk-4WRY7KPR.mjs";import"./chunk-VINX65TX.mjs";import{e as $}from"./chunk-ZWTCCLII.mjs";import"./chunk-4ZNEW5D7.mjs";import{j as O}from"./chunk-M4FFWHRN.mjs";import{Ab as f,Db as F,Ib as m,Jb as _,Kb as I,Lb as M,Ma as T,Mb as B,Nb as V,Pb as A,Qa as a,Qb as N,Rb as j,Sb as D,Vb as u,Wb as g,Xb as U,Y as l,aa as w,ab as p,gb as W,ib as h,ka as v,la as x,mb as L,nb as k,ob as C,pb as b,qb as s,rb as o,sb as d,vb as E,zb as y}from"./chunk-72ARS2FD.mjs";import"./chunk-VVCT4QZE.mjs";var ee=(i,r)=>r.id,te=i=>["/details",i],ie=()=>[1,2,3,4,5],re=(i,r)=>({"text-danger":i,"text-black":r});function ne(i,r){i&1&&(s(0,"span"),d(1,"i",19),o())}function se(i,r){i&1&&(s(0,"span"),d(1,"i",20),o())}function ae(i,r){if(i&1){let n=E();s(0,"div",7)(1,"div",8)(2,"div",9),d(3,"img",10),s(4,"h2",11),m(5),o(),s(6,"h3",12),m(7),o(),s(8,"div",13)(9,"span"),m(10),u(11,"translate"),o(),s(12,"div"),C(13,ne,2,0,"span",null,k),W(15,se,2,0,"span"),o()()(),s(16,"div",14)(17,"button",15),y("click",function(){let e=v(n).$implicit,c=f();return x(c.addToCart(e.id))}),m(18),u(19,"translate"),d(20,"i",16),o(),s(21,"div",17)(22,"i",18),y("click",function(){let e=v(n).$implicit,c=f();return x(c.addWishList(e.id))}),o()()()()()}if(i&2){let n=r.$implicit,t=f();a(2),h("routerLink",j(14,te,n.id)),a(),h("src",n.imageCover,T)("alt",n.title),a(2),_(" ",n.category.name," "),a(2),_(" ",n.title.split(" ",2).join(" ")," "),a(3),I(" ",n.price," ",g(11,10,"home.EGP")," "),a(3),b(N(16,ie).slice(0,n.ratingsAverage)),a(2),L(15,n.ratingsAverage%1!==0?15:-1),a(3),_(" ",g(19,12,"home.Add")," "),a(3),h("ngClass",D(17,re,t.isProductInWishlist(n.id),!t.isProductInWishlist(n.id)))}}var Ce=(()=>{let r=class r{constructor(){this._ProductsService=l(H),this._CartService=l(X),this._WishlistService=l(Z),this._ToastrService=l(Y),this.productList=p([]),this.textSearsh=p(""),this.isLoding=p(!1)}ngOnInit(){this.productSupscrip=this._ProductsService.getAllProduct().subscribe({next:t=>{this.productList.set(t.data)}}),this.getUserWishlistSub=this._WishlistService.getUserWishlist().subscribe({next:t=>{let e=p([]);t.data.forEach(c=>{e.update(P=>P+c._id)}),this._CartService.inSidWishList.set(e())}})}addToCart(t){this.isLoding.set(!0),this.addProductToCartSub=this._CartService.addProductToCart(t).subscribe({next:e=>{this._ToastrService.success(e.message),this.isLoding.set(!1),console.log(e),this._CartService.cartNumber.set(e.numOfCartItems)}})}isProductInWishlist(t){return this._CartService.inSidWishList().includes(t)}addWishList(t){this.addWishListsub=this._WishlistService.addWishList(t).subscribe({next:e=>{console.log("wish",e),this._ToastrService.success(e.status),this._CartService.inSidWishList.set(e.data)}})}ngOnDestroy(){this.addWishListsub?.unsubscribe(),this.addProductToCartSub?.unsubscribe(),this.productSupscrip?.unsubscribe()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=w({type:r,selectors:[["app-products"]],standalone:!0,features:[A],decls:11,vars:8,consts:[[1,"products"],[1,"container-fluid","py-5"],[1,"input-group","flex-nowrap","w-50","mx-auto","shadow","m-3"],["type","text","aria-label","Username","aria-describedby","addon-wrapping",1,"form-control","shadow-none",3,"ngModelChange","ngModel","placeholder"],["id","addon-wrapping",1,"input-group-text","bg-main-light"],[1,"fa-solid","fa-magnifying-glass","text-main","fa-2"],[1,"row"],[1,"col-md-2","g-3"],[1,"inner","product","border-0","p-2"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"text-main","small"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","justify-content-between","align-items-center","container"],[1,"btn-main",3,"click"],[1,"fa-solid","fa-cart-shopping","fa-flip"],[1,"myHart",3,"ngClass"],[1,"fas","fa-heart","fa-2x",3,"click"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star-half-stroke","rating-color"]],template:function(e,c){e&1&&(s(0,"section",0)(1,"div",1)(2,"div",2)(3,"input",3),u(4,"translate"),V("ngModelChange",function(S){return B(c.textSearsh,S)||(c.textSearsh=S),S}),o(),s(5,"span",4),d(6,"i",5),o()(),s(7,"div",6),C(8,ae,23,20,"div",7,ee),u(10,"searshPipe"),o()()()),e&2&&(a(3),F("placeholder"," ",g(4,3,"home.Searsh By Name...")," "),M("ngModel",c.textSearsh),a(5),b(U(10,5,c.productList(),c.textSearsh())))},dependencies:[Q,q,J,K,R,$,G,z,O]});let i=r;return i})();export{Ce as ProductsComponent};
